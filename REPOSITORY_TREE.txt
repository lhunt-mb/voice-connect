voice-openai-connect/
â”‚
â”œâ”€â”€ ğŸ“„ Configuration & Setup
â”‚   â”œâ”€â”€ .env.example                    # Environment variables template
â”‚   â”œâ”€â”€ .gitignore                      # Git ignore rules
â”‚   â”œâ”€â”€ .pre-commit-config.yaml         # Pre-commit hooks
â”‚   â”œâ”€â”€ docker-compose.yml              # Local dev stack with DynamoDB Local
â”‚   â”œâ”€â”€ Dockerfile                      # Gateway service container
â”‚   â”œâ”€â”€ LICENSE                         # MIT License
â”‚   â”œâ”€â”€ Makefile                        # Development commands
â”‚   â””â”€â”€ pyproject.toml                  # Python project config + dependencies
â”‚
â”œâ”€â”€ ğŸ“š Documentation
â”‚   â”œâ”€â”€ README.md                       # Main documentation (380 lines)
â”‚   â”œâ”€â”€ ARCHITECTURE.md                 # System architecture (600 lines)
â”‚   â”œâ”€â”€ QUICKSTART.md                   # Quick start guide (250 lines)
â”‚   â”œâ”€â”€ CONTRIBUTING.md                 # Contribution guidelines (200 lines)
â”‚   â”œâ”€â”€ DEPLOYMENT_CHECKLIST.md         # Production deployment (350 lines)
â”‚   â”œâ”€â”€ IMPLEMENTATION_SUMMARY.md       # This implementation summary
â”‚   â”œâ”€â”€ PROJECT_STRUCTURE.txt           # File tree with descriptions
â”‚   â””â”€â”€ REPOSITORY_TREE.txt             # Visual tree (this file)
â”‚
â”œâ”€â”€ ğŸš€ Services
â”‚   â”œâ”€â”€ gateway/                        # FastAPI Gateway Service
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ app.py                      # FastAPI app with HTTP + WebSocket endpoints
â”‚   â”‚   â”œâ”€â”€ session_manager.py         # Per-call session state management
â”‚   â”‚   â””â”€â”€ stream_handler.py          # Twilio â†” OpenAI audio bridge
â”‚   â”‚
â”‚   â””â”€â”€ orchestrator/                   # Business Logic & Integrations
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ openai_realtime.py          # OpenAI Realtime WebSocket client
â”‚       â”œâ”€â”€ dynamo_repository.py        # DynamoDB operations (put/get/delete)
â”‚       â”œâ”€â”€ hubspot_client.py           # HubSpot API client (async)
â”‚       â”œâ”€â”€ twilio_client.py            # Twilio REST API client (calls + DTMF)
â”‚       â”œâ”€â”€ token_generator.py          # 10-digit token generation
â”‚       â”œâ”€â”€ escalation.py               # Escalation policies & detection
â”‚       â””â”€â”€ orchestrator.py             # Main orchestration coordinator
â”‚
â”œâ”€â”€ ğŸ”§ Shared Utilities
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py                       # Pydantic Settings configuration
â”‚   â”œâ”€â”€ logging.py                      # Structured JSON logging with correlation IDs
â”‚   â”œâ”€â”€ types.py                        # Pydantic models (SessionState, HandoverPayload, etc.)
â”‚   â”œâ”€â”€ aws_clients.py                  # AWS client factories (DynamoDB)
â”‚   â””â”€â”€ retry.py                        # Retry policies (tenacity)
â”‚
â”œâ”€â”€ â˜ï¸  AWS Lambda
â”‚   â””â”€â”€ connect_lambda/                 # Amazon Connect Integration
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ handler.py                  # Lambda handler (token validation + lookup)
â”‚       â”œâ”€â”€ requirements.txt            # Lambda dependencies (boto3)
â”‚       â””â”€â”€ Dockerfile                  # Lambda deployment container
â”‚
â”œâ”€â”€ ğŸ§ª Tests
â”‚   â””â”€â”€ unit/                           # Unit Tests
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ test_token_generator.py     # Token generation tests
â”‚       â”œâ”€â”€ test_dynamo_repository.py   # DynamoDB operations tests
â”‚       â”œâ”€â”€ test_connect_lambda.py      # Lambda handler tests
â”‚       â”œâ”€â”€ test_hubspot_client.py      # HubSpot client tests
â”‚       â””â”€â”€ test_escalation.py          # Escalation logic tests
â”‚
â”œâ”€â”€ ğŸ“œ Scripts
â”‚   â”œâ”€â”€ create_dynamodb_table.sh        # Create HandoverTokens table with TTL
â”‚   â””â”€â”€ deploy_lambda.sh                # Deploy Connect Lambda function
â”‚
â””â”€â”€ ğŸ”„ CI/CD
    â””â”€â”€ .github/workflows/
        â””â”€â”€ ci.yml                      # GitHub Actions (Ruff, Pyright, Pytest)

KEY FILES BY FUNCTION:

ğŸ¯ Entry Points:
  - services/gateway/app.py             Main FastAPI application
  - aws/connect_lambda/handler.py       Lambda function handler

ğŸ”Œ External Integrations:
  - services/orchestrator/openai_realtime.py    OpenAI Realtime API
  - services/orchestrator/hubspot_client.py     HubSpot CRM
  - services/orchestrator/twilio_client.py      Twilio REST API
  - services/orchestrator/dynamo_repository.py  AWS DynamoDB

ğŸ¨ Core Logic:
  - services/gateway/stream_handler.py          Audio streaming & WebSocket handling
  - services/orchestrator/orchestrator.py       Escalation workflow coordinator
  - services/orchestrator/escalation.py         Keyword detection & policies

âš™ï¸  Configuration:
  - shared/config.py                    All environment variables
  - .env.example                        Configuration template

ğŸ“Š Observability:
  - shared/logging.py                   Structured JSON logs with correlation IDs

LINES OF CODE:
  Python: ~2,227 lines
  Documentation: ~1,500+ lines
  Tests: ~400 lines
  Total: ~4,000+ lines

EXTERNAL DEPENDENCIES (9):
  Production: fastapi, uvicorn, websockets, httpx, pydantic, pydantic-settings, boto3, python-json-logger, tenacity
  Development: ruff, pyright, pytest, pytest-asyncio, pytest-cov, moto, pre-commit
